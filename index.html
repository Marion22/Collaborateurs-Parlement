<html>
<head>
 <meta charset="UTF-8">
 <title>Évolution temporelle du total de collaborateurs parlementaires déclarés dans chaque Assemblée - Regards Citoyens</title>
 <script src="js/d3.js"></script>
 <style>
body {
  margin:auto;
}
.curve {
  fill: steelblue;
  fill-opacity: 0.6;
  stroke: steelblue;
  stroke-width: 1px;
}
.tooltip {
  fill: none;
  z-index: 10;
}
#xaxis , #yaxis  {
  opacity:0.5;
}
 </style>
</head>
<body>
 <center>
  <h1>Évolution du nombre de collaborateurs déclarés dans chaque Assemblée</h1>
  <p>par <a href="https://RegardsCitoyens.org">Regards Citoyens</a></p>
  <h2>À l'Assemblée nationale</h2>
  <svg id="graph-deputes"></svg>
  <h2>Au Sénat</h2>
  <svg id="graph-senateurs"></svg>
 </center>
</body>
<script type="text/javascript">
d3.timeFormat = d3.timeFormatLocale({
  "dateTime": "%A, le %e %B %Y, %X",
  "date": "%d/%m/%Y",
  "time": "%H:%M:%S",
  "periods": ["AM", "PM"],
  "days": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"],
  "shortDays": ["dim.", "lun.", "mar.", "mer.", "jeu.", "ven.", "sam."],
  "months": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre"],
  "shortMonths": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc."]
}).format;
function drawLineChart(typeParl) {
  d3.csv("data/liste_"+typeParl+"_collaborateurs-totaux.csv", function(data){
    var height = 150,
      width = 590,
      svg = d3.select("#graph-"+typeParl)
        .style("width", width)
        .style("height", height),
      xscale = d3.scaleLinear()
        .domain([new Date(data[0].date), new Date()])
        .range([20, width-55]),
      yscale = d3.scaleLinear()
        .domain([0, d3.max(data.map(function(x){ return parseInt(x.total_collabs); }))])
        .range([height-25, 0]);
  
    svg.append("path")
      .attr("id", "total_collabs_"+typeParl)
      .attr("class", "curve")
      .attr("d", d3.area()
        .curve(d3.curveStepAfter)
        .x(function(x){ return xscale(new Date(x.date)); })
        .y1(function(x){ return yscale(parseInt(x.total_collabs)); })
        .y0(yscale(0))
        (data)
      );

    svg.append("g")
      .attr("id", "xaxis")
      .attr("transform", "translate(0,"+(height-20)+")")
      .call(d3.axisBottom(xscale).ticks(8).tickFormat(d3.timeFormat("%b %y")));
    svg.append("g")
      .attr("id", "yaxis")
      .attr("transform", "translate("+(width-50)+",0)")
      .call(d3.axisRight(yscale).ticks(4));
  });
}
drawLineChart("deputes");
drawLineChart("senateurs");
</script>
</html>
